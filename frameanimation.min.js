/* Copyright Sborka Project         */
/* http://sborkaproject.com         */
/* Created by Hauts                 */
/* If u want to use it - contact me */
!function(t){var e=function(){this._name="FrameAnimation"};e.prototype._init=function(t){var t=t||{};this._direction=1,this._realFrame=this._roundFrame=this._maxRepeats=this._totalFrames=this._renderedFrame=0,this._prerenderUpdated=this._ready=this._playing=!1,this._stopFrames=[],this._frameCallbacks=[],this.alwaysRender(t.alwaysRender||!1),this.useUpdateSpeed(t.useUpdateSpeed||!1),this.fps("number"==typeof t.fps?t.fps:31),this._id=e._addInstance(this),this._name+="#"+this._id},e.prototype._die=function(){this._frameCallbacks=this._stopFrames=null,e._removeInstance(this)},e.prototype.die=function(){this._die()},e.prototype.useUpdateSpeed=function(t){return"undefined"==typeof t?this._useUpdateSpeed:(this._useUpdateSpeed=t?!0:!1,this)},e.prototype.alwaysRender=function(t){return"undefined"==typeof t?this._alwaysRender:(this._alwaysRender=t?!0:!1,this)},e.prototype.addStopFrame=function(t){return this._stopFrames[t-1]=!0,this},e.prototype.removeStopFrame=function(t){return this._stopFrames[t-1]=!1,this},e.prototype.removeStopFrames=function(t){for(var e=t.length,i=0;e>i;i++)this.removeStopFrame(t[i]);return this},e.prototype.removeAllStopFrames=function(){return this._stopFrames=[],this},e.prototype.setStopFrames=function(t){return this._stopFrames=t.concat(),this},e.prototype.getStopFrames=function(){return this._stopFrames.concat()},e.prototype.fps=function(t){return"number"==typeof t?(this._fps=t>999999?999999:.001>t?.001:t,this._frameTime=1e3/t,this._frameTime=this._frameTime<Number.MIN_VALUE?Number.MIN_VALUE:this._frameTime,this):this._fps},e.prototype.stop=function(){return this._playing=!1,this._realFrame=this._roundFrame,this._update(0),this},e.prototype.play=function(t){return this._playing=!0,this._realFrame=this._roundFrame,this.direction(t),this},e.prototype.playing=function(){return this._playing},e.prototype.toggle=function(){return this._playing?this.stop():this.play(),this},e.prototype.direction=function(t){return"number"==typeof t?(this._direction=t>0?1:-1,this):1==this._direction},e.prototype.flip=function(){var t=this._direction>0?1+this._realFrame-this._roundFrame:1-(this._realFrame-this._roundFrame-1);return this._realFrame=this._roundFrame+this._direction,this._realFrame+=this._direction>0?1-t:t,this._direction*=-1,this},e.prototype.gotoAndPlay=function(t,e){return t=this._limitFrame(t-1),this.direction(e),this._realFrame=this._roundFrame=t-this._direction,this._playing=!0,this},e.prototype.gotoAndStop=function(t){return t=this._limitFrame(t-1),this._realFrame=this._roundFrame=t,this._playing=!0,this._update(0),this._playing=!1,this},e.prototype.addFrameCallback=function(t,e,i){var t=t-1;return"undefined"==typeof this._frameCallbacks[t]&&(this._frameCallbacks[t]=[]),this._frameCallbacks[t].push({callback:e,repeats:i||-1}),this},e.prototype.addFramesCallback=function(t,e,i){for(var a=t.length,s=0;a>s;s++)this.addFrameCallback(t[s],e,i);return this},e.prototype.removeFrameCallback=function(t,e){var t=t-1;if(!this._frameCallbacks[t])return this;for(var i=this._frameCallbacks[t],a=i.length,s=0;a>s;s++)if(i[s].callback===e)return i.splice(s,1),this;return this},e.prototype.removeFrameCallbacks=function(t){return this._frameCallbacks[t-1]=[],this},e.prototype.removeAllFrameCallbacks=function(){return this._frameCallbacks=[],this},e.prototype.totalFrames=function(){return this._totalFrames},e.prototype.currentFrame=function(){return this._roundFrame+1},e.prototype._update=function(t,i){if(!this._playing||!this._ready){this._updateDebug();var a=!this._ready;return this._alwaysRender&&this._ready&&(this._render(this._renderedFrame,this._roundFrame),a=!1),void(a&&this._onBeforeReadyUpdate(t))}this._useUpdateSpeed&&(t=.999*this._frameTime),t=e._useExtraFrames?t:Math.min(this._frameTime,t);var s=t;if(s>this._frameTime&&(s=this._frameTime,t-=this._frameTime),this._realFrame+=s*this._direction/this._frameTime,this._realFrame=this._normalizeFrame(this._realFrame),this._roundFrame=this._normalizeFrame((this._realFrame<<0)+this._direction),this._checkFrameActions(this._roundFrame),e._useExtraFrames){this._maxRepeats<i&&(this._maxRepeats=i);var r=t-this._frameTime;if(r>0&&i<e._maxFrameRepeats)return i++,this._update(r,i)}return this._prerenderUpdated||(this._prerenderUpdated=!0,this._useUpdateSpeed)?void((this._renderedFrame!=this._roundFrame||this._alwaysRender)&&(this._render(this._renderedFrame,this._roundFrame),this._renderedFrame=this._roundFrame,this._updateDebug(),this._prerenderUpdated=!1,this._launchCallback(this.onRender))):void this._update(0)},e.prototype._updateDebug=function(){this._debug&&(this._debugInfo="FrameAnimation v"+e.version+"<br>",this._debugInfo+=this._name+" #"+this._id+" v"+this._version+"<br>",this._debugInfo+=this._fps.toFixed(2)+" | "+this._frameTime.toFixed(2)+" | "+this._realFrame.toFixed(2)+" | "+this._renderedFrame+"<br>",this._debugInfo+="max repeats: "+this._maxRepeats+"<br>",this._debugInfo+="total frames: "+this._totalFrames+"<br>",this._debugInfo+="fps: "+e.fps().toFixed(2)+"<br>",this._debugInfo+="use RAF: "+e._usingRAF+"<br>",this._debugInfo+="use update speed: "+this._useUpdateSpeed+"<br>",this._debugInfo+="force3D: "+this._force3D,this._applyDebugInfo(this._debugInfo))},e.prototype._applyDebugInfo=function(){},e.prototype._render=function(){},e.prototype._onBeforeReadyUpdate=function(){},e.prototype._checkFrameActions=function(t,e){if(!e){if(this._checkedCallbacksFrame==t)return;this._checkedCallbacksFrame=t}if(this._stopFrames[t]&&this.stop(),"undefined"!=typeof this._frameCallbacks[t]){for(var i=this._frameCallbacks[t],a=i.length,s=[],r=0;a>r;r++){var n=i[r];n.callback.apply(this),n.repeats>0&&(n.repeats--,0==n.repeats&&s.push(n))}for(var o=s.length,r=0;o>r;r++)this.removeFrameCallback(t+1,s[r].callback)}if(!e){var h=-(this._totalFrames-t)-1;this._checkFrameActions(h,!0)}},e.prototype._normalizeFrame=function(t){return t=(t>this._totalFrames?t-this._totalFrames:0>t?this._totalFrames+t:t)%this._totalFrames},e.prototype._limitFrame=function(t){return t=t>this._totalFrames-1?this._totalFrames-1:0>t?0:t},e.prototype._launchCallback=function(t,e){"function"==typeof t?t.apply(this,e||[]):null},e.utils={},e.utils.log=function(e){t.console&&t.console.log&&t.console.log(e)},e.utils.error=function(e){t.console&&(t.console.error?t.console.error(e):t.console.log&&t.console.log(e))},e.utils.isArray=function(t){return"[object Array]"==Object.prototype.toString.call(t)},e.utils.isIE=function(){var t=navigator.userAgent.toLowerCase();return-1!=t.indexOf("msie")?parseInt(t.split("msie")[1]):!1},e.utils.isElement=function(t){try{return t instanceof HTMLElement}catch(e){return"object"==typeof t&&1===t.nodeType&&"object"==typeof t.style&&"object"==typeof t.ownerDocument}},e.utils.getDOMElement=function(t){if(e.utils.isElement(t))return t;if("string"==typeof t){if("undefined"!=typeof document.querySelectorAll)return document.querySelectorAll(t)[0];if("#"==t.substr(0,1))return document.getElementById(t.substr(1,t.length-1));if("."==t.substr(0,1))return document.getElementsByClassName(t.substr(1,t.length-1))[0]}else if(e.utils.isElement(t[0]))return t[0];return null},e.utils.getCSSValue=function(t){return"undefined"==typeof t?"0px":isNaN(Number(""+t))?t:t+"px"},e.utils.rightNow=function(){return t.performance&&t.performance.now?t.performance.now():+new Date},e._addInstance=function(t){return this._instances.push(t),this._instances.length-1},e._removeInstance=function(t){return this._instances.splice(t._id,1),t},e.stop=function(){return this._playing=!1,this},e.start=function(){return this._playing=!0,this},e._init=function(){if(!this._inited){this._playing=!0,this._updateCallbacks=[],this._fpsStats=[],this._fps=0,this._timeScale=1,this._stableSkipFrames=5,this._useExtraFrames=!0,this._maxFrameDelta=500,this._maxDelta=500,this._maxFrameRepeats=100,this._inited=this._usingRAF=!0,this._instances=[];for(var i=0,a=["ms","moz","webkit","o"],s=0;s<a.length&&!t.requestAnimationFrame;++s)t.requestAnimationFrame=t[a[s]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[a[s]+"CancelAnimationFrame"]||t[a[s]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(a){var s=e.utils.rightNow(),r=Math.max(0,16-(s-i)),n=t.setTimeout(function(){a(s+r)},r);return i=s+r,n},this._usingRAF=!1),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){clearTimeout(t)});var r=this;this._updateShim=function(t){r._update(t)},t.requestAnimationFrame(this._updateShim)}},e.extend=function(t,e){"undefined"==typeof e&&(e=function(){});for(var i in t.prototype)e.prototype[i]=t.prototype[i];return e},e._update=function(e){if(this._prevTimer&&this._playing){var i=e-this._prevTimer<<0,a=1e3/i;this._fpsStats.push(a),this._fpsStats.length>10&&this._fpsStats.splice(0,1);for(var s=this._fpsStats.length,r=0,n=0;s>n;n++)r+=this._fpsStats[n];if(r/=s,this._fps+=(r-this._fps)/5,i*=this._timeScale,i=i>this._maxDelta?this._maxDelta:i,this._stableSkipFrames>0)this._stableSkipFrames--;else for(var o=this._instances.length,h=this._useExtraFrames?i/this._maxFrameDelta<<0:0,l=i-this._maxFrameDelta*h,n=0;o>n;n++){for(var m=this._instances[n],_=0;h>_;_++)this._instances[n]._update(this._maxFrameDelta,0);m._update(l,0)}}this._prevTimer=e,this._callUpdateCallbacks(),t.requestAnimationFrame(this._updateShim)},e.fps=function(){return this._fps},e.timeScale=function(t){return"undefined"==typeof t?this._timeScale:(this._timeScale=t,this)},e.maxFrameRepeats=function(t){return"number"==typeof t?(this._maxFrameRepeats=t,this):this._maxFrameRepeats},e.maxFrameDelta=function(t){return"number"==typeof t?(this._maxFrameDelta=t,this):this._maxFrameDelta},e.maxDelta=function(t){return"number"==typeof t?(this._maxDelta=t,this):this._maxDelta},e.useExtraFrames=function(t){return"undefined"!=typeof t?(this._useExtraFrames=t,this):this._useExtraFrames},e.addUpdateCallback=function(t){return this.removeUpdateCallback(t),this._updateCallbacks.push(t),this},e.removeUpdateCallback=function(t){for(var e=this._updateCallbacks.length,i=0;e>i;i++)if(t===this._updateCallbacks[i])return this._updateCallbacks.splice(i,1),this;return this},e._callUpdateCallbacks=function(){for(var t=this._updateCallbacks.length,e=0;t>e;e++){var i=this._updateCallbacks[e];i()}return this};var i=e.extend(e,function(t,a,s,r){var t=e.utils.getDOMElement(t);if(null==t)return void e.utils.error("Not a DOM element passed to CanvasFrameAnimation: "+t);this._name="CanvasFrameAnimation",this._version=i.version,this._available=i.available(),this.element=t,this._elementStyle=this.element.style,this.element.canvasFrameAnimation=this,this._renderGhosting=r.renderGhosting||0,this._renderAlpha=r.renderAlpha||1,this._renderPostEffect=r.renderPostEffect;var r=r||{};if(this._init(r),"canvas"!=this.element.tagName.toLowerCase())return void e.utils.error("Usupported element for CanvasFrameAnimation: "+t);try{this._canvasContext=this.element.getContext("2d")}catch(n){"function"==typeof r.fallback&&r.fallback()}this._available&&(this._peElement=document.createElement("canvas"),this._peElement.width=this.element.width,this._peElement.height=this.element.height,this._peElementContext=this._peElement.getContext("2d"),this._initFramesAnimation(a,s,r),this._loadingCounter=0,this._loadingAngle=0)});i.create=function(t,e,a){return new i(document.createElement("canvas"),t,e,a)},i.available=function(){if(!this._availabilityTested){this._availabilityTested=!0;var t=document.createElement("canvas");this._available=!(!t.getContext||!t.getContext("2d"))}return this._available},i.prototype.available=function(){return this._available},i.prototype._initFramesAnimation=function(t,i,a){if(this._totalFrames=i,this._readyCallback=a.ready,this._loadingCallback=a.loading,this._ready=!(0==a.waitBeforeLoaded?!1:!0),this._preventCache=a.preventCache?!0:!1,this._useChainLoading=a.useChainLoading?!0:!1,this._path=t,this._startFrom="number"==typeof a.startFrom?a.startFrom:0,this._frameImages=[],this._loadedCounter=0,this.debug(a.debug||!1,a.appendDebugTo),this.force3D(a.force3D||!1),e.utils.isArray(t)?(this._totalFrames=t.length,this._useCustomPathArray=!0):(this._useFramesDetect="number"==typeof i?!1:!0,this._useFramesDetect&&(this._totalFrames=0,this._useChainLoading=!0,this._framesDetectReady=!1),this._pathPatternLength=this._path.split("#").length-1),this._useChainLoading)this._createFrameImage(0);else for(var s=0;s<this._totalFrames;s++)this._createFrameImage(s)},i.prototype._onBeforeReadyUpdate=function(t){if(this._available){var e=this.element.offsetWidth,i=this.element.offsetHeight;(this.element.width!=e||this.element.height!=i)&&(this.element.width=e,this.element.height=i),this._canvasContext.save();var a=this.element.width,s=this.element.height;this._loadingCounter+=t;var r=this._loadingCounter/(200-50*this._loadingProgress),n=r/5;n=n>1?1:n,this._canvasContext.globalCompositeOperation="destination-out",this._canvasContext.fillStyle="rgba(255, 255, 255, 0.1)",this._canvasContext.beginPath(),this._canvasContext.fillRect(0,0,this.element.width,this.element.height),this._canvasContext.fill(),this._canvasContext.globalCompositeOperation="source-over",this._canvasContext.globalAlpha=1,this._canvasContext.translate(a/2,s/2),this._canvasContext.fillStyle="rgba(255,255,255,"+n+")";for(var o=0,h=this._loadingAngle;r>=h;h+=.05)this._canvasContext.rotate(-o),this._canvasContext.rotate(h),o=h,this._canvasContext.fillStyle="rgba(0,0,0,0.1)",this._canvasContext.fillRect(4,4,3,3),this._canvasContext.fillStyle="rgba(255,255,255,"+n+")",this._canvasContext.fillRect(5,5,1,1);this._canvasContext.restore(),this._loadingAngle=r}},i.prototype._render=function(t,e){if(!this._available)return!1;var i=this._frameImages[e],a=i.width,s=i.height;(this.element.width!=a||this.element.height!=s)&&(this.element.width=this._peElement.width=a,this.element.height=this._peElement.height=s);var r=this._canvasContext;return r.save(),r.globalCompositeOperation="source-over",this._renderGhosting>0?(r.globalCompositeOperation="destination-out",r.fillStyle="rgba(255, 255, 255, "+this._renderGhosting+")",r.beginPath(),r.fillRect(0,0,a,s),r.fill(),r.globalCompositeOperation="source-over",r.globalAlpha=this._renderAlpha):r.clearRect(0,0,a,s),r.drawImage(i,0,0),this._peElementContext.clearRect(0,0,a,s),this._peElementContext.drawImage(this.element,0,0),this._peElementContext.save(),this._launchCallback(this._renderPostEffect,[this.element,this._peElement,r,this._peElementContext,a,s]),this._peElementContext.restore(),r.restore(),!0},i.prototype._createFrameImage=function(t){var e=document.createElement("img"),i=this;e.onload=function(){i._imageLoadedHandler(this,t)},this._useFramesDetect&&(e.onerror=function(){i._framesDetectReady||(i._totalFrames>t&&(i._totalFrames=t),i._framesDetectReady=!0,i._checkLoaded())});var a=this._getImagePath(t);this._frameImages[t]=e,e.style.visibility="hidden",e.src=a+(this._preventCache?"?"+Math.random():"")},i.prototype._imageLoadedHandler=function(t,i){var a=i+1;if(this._useFramesDetect?(i>=this._totalFrames&&(this._totalFrames=i+1),this._createFrameImage(a)):this._useChainLoading&&this._loadedCounter<this._totalFrames-1&&this._createFrameImage(a),e._IEMode?(t.style.opacity="0",t.style.filter="alpha(opacity=0)",t.style.visibility="visible"):t.style.visibility="hidden",this._loadedCounter++,this._useFramesDetect)this._loadingProgress=1;else if("function"==typeof this._loadingCallback){var s=this._loadedCounter/this._totalFrames;this._loadingProgress=s,this._loadingCallback.apply(this,[s])}this._checkLoaded()},i.prototype._checkLoaded=function(){(!this._useFramesDetect||this._framesDetectReady)&&this._loadedCounter>=this._totalFrames&&(this._ready=!0,this._launchCallback(this._readyCallback))},i.prototype._getImagePath=function(t){if(this._useCustomPathArray)return this._path[t];for(var t=t+this._startFrom+"";t.length<this._pathPatternLength;)t="0"+t;var e=-1;t.length>this._pathPatternLength&&(e=this._pathPatternLength-1);for(var i=t.split(""),a=this._path.length,s=this._path.split(""),r=0,n=a-1;n>=0;n--)if("#"==this._path.substr(n,1)){if(s[n]=i.pop(),r==e&&(s[n]=i.join("")),0==i.length)break;r++}return s.join("")},i.prototype._applyDebugInfo=function(t){this._debugElement.innerHTML=t},i.prototype.debug=function(t,i){if("undefined"==typeof t)return this._debug;this._debug;if(this._debug=t?!0:!1,this._debug){if(!this._debugElement){this._debugElement=document.createElement("div");var a=this._debugElement.style;a.position="absolute",a.width=a.height="auto",a.fontFamily="'PT Sans',Tahoma,Helvetica",a.fontSize="9px",a.color="#FFFFFF",a.lineHeight="12px",a.paddingLeft=a.paddingRight=a.left=a.top="4px",a.paddingTop=a.paddingBottom="0",a.backgroundColor="#837AAF",a.cursor="default",a.zIndex=9,a.textShadow="0 0 2px rgba(0,0,0,0.85)",a.boxShadow="0 0 10px rgba(0,0,0,0.5)",a["-webkit-touch-callout"]="none",a["-webkit-user-select"]="none",a["-khtml-user-select"]="none",a["-moz-user-select"]="none",a["-ms-user-select"]="none",a["user-select"]="none"}try{"undefined"!=typeof i&&e.utils.isElement(i)?i.appendChild(this._debugElement):this.element.appendChild(this._debugElement)}catch(s){e.utils.error("Error creating debug element")}}else this._debugElement&&this._debugElement.parentNode.removeChild(this._debugElement);return this},i.prototype.getDebugElement=function(){return this._debug||this.debug(!0),this._debugElement},i.prototype.force3D=function(t){return"undefined"==typeof t?this._force3D:(this._force3D=t?!0:!1,this._force3D?(this._elementStyle["-webkit-transform"]="translate3d(0, 0, 0)",this._elementStyle["-webkit-backface-visibility"]="hidden",this._elementStyle["-webkit-perspective"]="1000",this._elementStyle.transform="translate3d(0, 0, 0)",this._elementStyle["backface-visibility"]="hidden",this._elementStyle.perspective="1000"):(this._elementStyle["-webkit-transform"]="",this._elementStyle["-webkit-backface-visibility"]="",this._elementStyle["-webkit-perspective"]="",this._elementStyle.transform="",this._elementStyle["backface-visibility"]="",this._elementStyle.perspective=""),this)},i.prototype.die=function(){this._die()},t.CanvasFrameAnimation=i;var a=e.extend(i,function(t,i,s,r){var t=e.utils.getDOMElement(t);if(null==t)return void e.utils.error("Not a DOM element passed to FrameAnimation: "+t);a._IEMode=e.utils.isIE(),this._name="ImageFrameAnimation",this._version=a.version,this.element=t,this._elementStyle=this.element.style,this.element.imageFrameAnimation=this;var r=r||{};this._init(r),this._initFramesAnimation(i,s,r),this._renderAsBackground=r.renderAsBackground?!0:!1,this._renderAsBackground||this._useChainLoading||this._appendFrameImages()});a.available=a.prototype.available=function(){return!0},a.create=function(t,e,i){return new a(document.createElement("div"),t,e,i)},a.prototype._appendFrameImages=function(){for(var t=0;t<this._totalFrames;t++){var e=this._frameImages[t];this.element.appendChild(e),e.style.position="absolute"}},a.prototype._render=function(t,e){if(this._renderAsBackground)this._elementStyle.backgroundImage="url('"+this._frameImages[e].src+"')";else{var i=this._frameImages[t],s=this._frameImages[e];a._IEMode?(i.style.opacity="0",i.style.filter="alpha(opacity=0)",s.style.opacity="1",s.style.filter="alpha(opacity=100)"):i.style.visibility="hidden",s.style.visibility="visible"}return!0},a.prototype._checkLoaded=function(){(!this._useFramesDetect||this._framesDetectReady)&&this._loadedCounter>=this._totalFrames&&(this._ready=!0,this._appendFrameImages(),this._launchCallback(this._readyCallback))},a.prototype.die=function(){this._die()},a.prototype._onBeforeReadyUpdate=function(){},t.ImageFrameAnimation=a;var s=e.extend(e,function(i,a){var i=e.utils.getDOMElement(i);if(null==i)return void e.utils.error("Not a DOM element passed to SpriteFrameAnimation: "+i);this._name="SpriteFrameAnimation",this._version=s.version,this.element=i,this._elementStyle=this.element.style,this.element.spriteFrameAnimation=this;var a=a||{};this._init(a),this._preventCache=a.preventCache?!0:!1,this.debug(a.debug||!1,a.appendDebugTo),this.force3D(a.force3D||!1);try{this._elementStylesHolder=this.element.currentStyle||t.getComputedStyle(this.element,!1)}catch(r){this._elementStylesHolder=this.element.style}this._isVertical=a.isVertical,this._frameSize=a.frameSize,this._useAutoDetect="boolean"!=typeof a.isVertical||"number"!=typeof a.frameSize||"number"!=typeof a.totalFrames,this._ready=!this._useAutoDetect,this._testImageReady=!1,this._readyCallback=a.ready;var n=this;if(a.background)try{this._elementStylesHolder.backgroundImage="url('"+a.background+"')"}catch(r){this._elementStyle.backgroundImage="url('"+a.background+"')",this._elementStylesHolder=this._elementStyle}this._origBgSrc=this._elementStylesHolder.backgroundImage;var o=this._origBgSrc.replace(/.*\s?url\([\"\"]?/,"").replace(/[\"\"]?\).*/,"");this._useAutoDetect&&(this._elementStyle.backgroundImage="none"),""!=o&&"none"!=o?(this._testImage=new Image,this._testImage.onerror=function(){e.utils.error("Unable to autodetect animation settings")},this._testImage.onload=function(){n._lazyInit()},this._testImage.src=o+(this._preventCache?"?"+Math.random():"")):e.utils.error("No background image setted for SpriteFrameAnimation of element "+this.element)});s.available=s.prototype.available=function(){return!0},s.create=function(t,i){var a=document.createElement("div");return i=i||{},i.background=t,a.style.width=e.utils.getCSSValue(i.width),a.style.height=e.utils.getCSSValue(i.height),new s(a,i)},s.prototype._lazyInit=function(){if(this._testImageReady=this._ready=!0,this._useAutoDetect){var t=this._testImage.width,e=this._testImage.height,i=t/e,a=this.element.offsetWidth||parseInt(this._elementStyle.width),s=this.element.offsetHeight||parseInt(this._elementStyle.height),r=a/s;if(isNaN(r)){var n=this.element.cloneNode(!0);n.style.visibility="hidden",document.body.appendChild(n);var o=n.style,a=n.offsetWidth||parseInt(o.width),s=n.offsetHeight||parseInt(o.height),r=a/s;document.body.removeChild(n)}this._isVertical=r>i,this._totalFrames=(this._isVertical?e/s:t/a)<<0,this._frameSize=(this._isVertical?e/this._totalFrames:t/this._totalFrames)<<0,this._elementStyle.backgroundImage=this._origBgSrc,this._launchCallback(this._readyCallback)}else this._launchCallback(this._readyCallback)},s.prototype._render=function(){var t=-(this._roundFrame*this._frameSize);return this._isVertical?(this._elementStyle.backgroundPosition="0px "+t+"px",this._elementStyle.backgroundPositionY=t+"px"):(this._elementStyle.backgroundPosition=t+"px 0px",this._elementStyle.backgroundPositionX=t+"px"),!0},s.prototype.die=function(){this._die()},s.prototype._applyDebugInfo=i.prototype._applyDebugInfo,s.prototype.debug=i.prototype.debug,s.prototype.getDebugElement=i.prototype.getDebugElement,s.prototype.force3D=i.prototype.force3D,t.SpriteFrameAnimation=s,t.jQuery&&t.jQuery.fn&&!function(t){t.fn.canvasFrameAnimation=function(t,e,a,s){for(var r=this.length,n=0;r>n;n++){var o=this.eq(n),h=new i(o[0],t,e,a);o.data("canvasFrameAnimation",h),"function"==typeof s&&s(this[n],h)}return this},t.fn.imageFrameAnimation=function(t,e,i,s){for(var r=this.length,n=0;r>n;n++){var o=this.eq(n),h=new a(o[0],t,e,i);o.data("imageFrameAnimation",h),"function"==typeof s&&s(this[n],h)}return this},t.fn.spriteFrameAnimation=function(t,e){for(var i=this.length,a=0;i>a;a++){var r=this.eq(a),n=new s(r[0],t);r.data("spriteFrameAnimation",n),"function"==typeof e&&e(this[a],n)}return this}}(jQuery),e.version=1,i.version=1,a.version=1,s.version=1,e._init(),t.FrameAnimation=e}(window);